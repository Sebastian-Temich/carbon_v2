{"ast":null,"code":"import _objectSpread from\"/Users/st/Documents/carbon/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useTranslation}from'react-i18next';import{useOffsetLogs}from'@hooks/offset-logs';import{OffsetLogAction}from'@custom-types/offset-logs-types';export const useProjectLogs=_ref=>{let{projectId,offsetLogsPage=1,offsetLogsPerPage=10}=_ref;if(!projectId){return{parsedTableOffsetLogs:[],isRefetchingOffsetLogs:true,isLoadingOffsetLogs:true,offsetLogsCount:0,projectGeneralInfo:null};}const{offsetLogs,isRefetching:isRefetchingOffsetLogs,isLoading:isLoadingOffsetLogs,itemsCount:offsetLogsCount,projectGeneralInfo}=useOffsetLogs({projectId,page:offsetLogsPage,perPage:offsetLogsPerPage});const{parsedTableOffsetLogs}=useParsedTableOffsetLogs({offsetLogs});return{parsedTableOffsetLogs,isRefetchingOffsetLogs,isLoadingOffsetLogs,offsetLogsCount,projectGeneralInfo};};const useParsedTableOffsetLogs=_ref2=>{let{offsetLogs}=_ref2;const{t}=useTranslation();const getActionDescription=offsetLog=>{const{action,sourceOffset,targetOffset}=offsetLog;const sourceOffsetCompanyName=sourceOffset.company.name;const targetOffsetCompanyName=targetOffset.company.name;switch(action){case OffsetLogAction.Buy:return\"\".concat(t('boughtBy'),\" \").concat(targetOffsetCompanyName);case OffsetLogAction.Sell:return\"\".concat(t('soldBy'),\" \").concat(sourceOffsetCompanyName);case OffsetLogAction.Retire:return\"\".concat(t('retiredBy'),\" \").concat(sourceOffsetCompanyName);default:return t('unknownAction');}};const parsedTableOffsetLogs=offsetLogs.map(offsetLog=>{return _objectSpread(_objectSpread({},offsetLog),{},{action:t(\"offsetLogs.actions.\".concat(offsetLog.action)),createdAt:new Date(offsetLog.createdAt).toLocaleString(),actionDescription:getActionDescription(offsetLog),unitPrice:\"\".concat(offsetLog.unitPrice,\" \").concat(offsetLog.currency)});});return{parsedTableOffsetLogs};};","map":{"version":3,"names":["useTranslation","useOffsetLogs","OffsetLogAction","useProjectLogs","_ref","projectId","offsetLogsPage","offsetLogsPerPage","parsedTableOffsetLogs","isRefetchingOffsetLogs","isLoadingOffsetLogs","offsetLogsCount","projectGeneralInfo","offsetLogs","isRefetching","isLoading","itemsCount","page","perPage","useParsedTableOffsetLogs","_ref2","t","getActionDescription","offsetLog","action","sourceOffset","targetOffset","sourceOffsetCompanyName","company","name","targetOffsetCompanyName","Buy","concat","Sell","Retire","map","_objectSpread","createdAt","Date","toLocaleString","actionDescription","unitPrice","currency"],"sources":["/Users/st/Documents/carbon/front/src/screens/project-logs/hooks/use-project-logs.ts"],"sourcesContent":["import { useTranslation } from 'react-i18next';\nimport { useOffsetLogs } from '@hooks/offset-logs';\nimport { TableProjectLog, OffsetLog, OffsetLogAction } from '@custom-types/offset-logs-types';\n\ninterface UseProjectLogsArgs {\n  projectId: string | undefined;\n  offsetLogsPage?: number;\n  offsetLogsPerPage?: number;\n}\n\ninterface UseParsedTableOffsetLogs {\n  offsetLogs: OffsetLog[];\n}\n\nexport const useProjectLogs = ({\n  projectId,\n  offsetLogsPage = 1,\n  offsetLogsPerPage = 10,\n}: UseProjectLogsArgs) => {\n  if (!projectId) {\n    return {\n      parsedTableOffsetLogs: [],\n      isRefetchingOffsetLogs: true,\n      isLoadingOffsetLogs: true,\n      offsetLogsCount: 0,\n      projectGeneralInfo: null,\n    };\n  }\n\n  const {\n    offsetLogs,\n    isRefetching: isRefetchingOffsetLogs,\n    isLoading: isLoadingOffsetLogs,\n    itemsCount: offsetLogsCount,\n    projectGeneralInfo,\n  } = useOffsetLogs({ projectId, page: offsetLogsPage, perPage: offsetLogsPerPage });\n  const { parsedTableOffsetLogs } = useParsedTableOffsetLogs({ offsetLogs });\n\n  return {\n    parsedTableOffsetLogs,\n    isRefetchingOffsetLogs,\n    isLoadingOffsetLogs,\n    offsetLogsCount,\n    projectGeneralInfo,\n  };\n};\n\nconst useParsedTableOffsetLogs = ({ offsetLogs }: UseParsedTableOffsetLogs) => {\n  const { t } = useTranslation();\n\n  const getActionDescription = (offsetLog: OffsetLog) => {\n    const { action, sourceOffset, targetOffset } = offsetLog;\n    const sourceOffsetCompanyName = sourceOffset.company.name;\n    const targetOffsetCompanyName = targetOffset.company.name;\n\n    switch (action) {\n      case OffsetLogAction.Buy:\n        return `${t('boughtBy')} ${targetOffsetCompanyName}`;\n      case OffsetLogAction.Sell:\n        return `${t('soldBy')} ${sourceOffsetCompanyName}`;\n      case OffsetLogAction.Retire:\n        return `${t('retiredBy')} ${sourceOffsetCompanyName}`;\n      default:\n        return t('unknownAction');\n    }\n  };\n\n  const parsedTableOffsetLogs: TableProjectLog[] = offsetLogs.map((offsetLog) => {\n    return {\n      ...offsetLog,\n      action: t(`offsetLogs.actions.${offsetLog.action}`),\n      createdAt: new Date(offsetLog.createdAt).toLocaleString(),\n      actionDescription: getActionDescription(offsetLog),\n      unitPrice: `${offsetLog.unitPrice} ${offsetLog.currency}`,\n    } as TableProjectLog;\n  });\n\n  return { parsedTableOffsetLogs };\n};\n"],"mappings":"qHAAA,OAASA,cAAc,KAAQ,eAAe,CAC9C,OAASC,aAAa,KAAQ,oBAAoB,CAClD,OAAqCC,eAAe,KAAQ,iCAAiC,CAY7F,MAAO,MAAM,CAAAC,cAAc,CAAGC,IAAA,EAIJ,IAJK,CAC7BC,SAAS,CACTC,cAAc,CAAG,CAAC,CAClBC,iBAAiB,CAAG,EACF,CAAC,CAAAH,IAAA,CACnB,GAAI,CAACC,SAAS,CAAE,CACd,MAAO,CACLG,qBAAqB,CAAE,EAAE,CACzBC,sBAAsB,CAAE,IAAI,CAC5BC,mBAAmB,CAAE,IAAI,CACzBC,eAAe,CAAE,CAAC,CAClBC,kBAAkB,CAAE,IACtB,CAAC,CACH,CAEA,KAAM,CACJC,UAAU,CACVC,YAAY,CAAEL,sBAAsB,CACpCM,SAAS,CAAEL,mBAAmB,CAC9BM,UAAU,CAAEL,eAAe,CAC3BC,kBACF,CAAC,CAAGX,aAAa,CAAC,CAAEI,SAAS,CAAEY,IAAI,CAAEX,cAAc,CAAEY,OAAO,CAAEX,iBAAkB,CAAC,CAAC,CAClF,KAAM,CAAEC,qBAAsB,CAAC,CAAGW,wBAAwB,CAAC,CAAEN,UAAW,CAAC,CAAC,CAE1E,MAAO,CACLL,qBAAqB,CACrBC,sBAAsB,CACtBC,mBAAmB,CACnBC,eAAe,CACfC,kBACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAO,wBAAwB,CAAGC,KAAA,EAA8C,IAA7C,CAAEP,UAAqC,CAAC,CAAAO,KAAA,CACxE,KAAM,CAAEC,CAAE,CAAC,CAAGrB,cAAc,CAAC,CAAC,CAE9B,KAAM,CAAAsB,oBAAoB,CAAIC,SAAoB,EAAK,CACrD,KAAM,CAAEC,MAAM,CAAEC,YAAY,CAAEC,YAAa,CAAC,CAAGH,SAAS,CACxD,KAAM,CAAAI,uBAAuB,CAAGF,YAAY,CAACG,OAAO,CAACC,IAAI,CACzD,KAAM,CAAAC,uBAAuB,CAAGJ,YAAY,CAACE,OAAO,CAACC,IAAI,CAEzD,OAAQL,MAAM,EACZ,IAAK,CAAAtB,eAAe,CAAC6B,GAAG,CACtB,SAAAC,MAAA,CAAUX,CAAC,CAAC,UAAU,CAAC,MAAAW,MAAA,CAAIF,uBAAuB,EACpD,IAAK,CAAA5B,eAAe,CAAC+B,IAAI,CACvB,SAAAD,MAAA,CAAUX,CAAC,CAAC,QAAQ,CAAC,MAAAW,MAAA,CAAIL,uBAAuB,EAClD,IAAK,CAAAzB,eAAe,CAACgC,MAAM,CACzB,SAAAF,MAAA,CAAUX,CAAC,CAAC,WAAW,CAAC,MAAAW,MAAA,CAAIL,uBAAuB,EACrD,QACE,MAAO,CAAAN,CAAC,CAAC,eAAe,CAAC,CAC7B,CACF,CAAC,CAED,KAAM,CAAAb,qBAAwC,CAAGK,UAAU,CAACsB,GAAG,CAAEZ,SAAS,EAAK,CAC7E,OAAAa,aAAA,CAAAA,aAAA,IACKb,SAAS,MACZC,MAAM,CAAEH,CAAC,uBAAAW,MAAA,CAAuBT,SAAS,CAACC,MAAM,CAAE,CAAC,CACnDa,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACf,SAAS,CAACc,SAAS,CAAC,CAACE,cAAc,CAAC,CAAC,CACzDC,iBAAiB,CAAElB,oBAAoB,CAACC,SAAS,CAAC,CAClDkB,SAAS,IAAAT,MAAA,CAAKT,SAAS,CAACkB,SAAS,MAAAT,MAAA,CAAIT,SAAS,CAACmB,QAAQ,CAAE,GAE7D,CAAC,CAAC,CAEF,MAAO,CAAElC,qBAAsB,CAAC,CAClC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}