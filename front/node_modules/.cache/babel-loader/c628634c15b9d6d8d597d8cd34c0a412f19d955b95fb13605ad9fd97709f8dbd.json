{"ast":null,"code":"import{DataTable}from'primereact/datatable';import{useEffect,useState}from'react';import{Column}from'primereact/column';import{Image}from'primereact/image';import{Tooltip}from'primereact/tooltip';import dayjs from'dayjs';import{Button}from'primereact/button';import{useNavigate}from'react-router';import{observer}from'mobx-react';import{rootStore}from'@store/root-store';import{useTranslation}from'react-i18next';import{TableHeader}from'@components/table/table-header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ModeratorProjectList=observer(()=>{var _projects$pagination;const{resetAllFilter}=rootStore.filterStore;const{paginationStore}=rootStore;const{projects,loaded,fetchProjects}=rootStore.projectStore;const{t}=useTranslation();const navigate=useNavigate();const[first,setFirst]=useState(0);const[totalRecords,setTotalRecords]=useState(0);const sdgBodyTemplate=rowData=>{return/*#__PURE__*/_jsx(\"div\",{className:\"flex car-sdg-container\",children:rowData.sustainableDevelopmentGoals.map(elem=>{const tooltipClass=\"sdg-\".concat(elem.id);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Tooltip,{target:\".\".concat(tooltipClass)}),/*#__PURE__*/_jsx(Image,{src:elem.imageUri,alt:\"Logo\",height:\"30px\",className:\"mr-2 \".concat(tooltipClass),\"data-pr-tooltip\":elem.name,\"data-pr-position\":\"right\",\"data-pr-at\":\"right+5 top\",\"data-pr-my\":\"left center-2\"})]},elem.id);})});};const controlsTemplate=rowData=>{return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-column\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",icon:\"pi pi-eye\",label:t('button.logs'),className:\"p-button mx-auto\",onClick:()=>navigate(\"/moderator/projects/\".concat(rowData.id,\"/logs\"))})});};useEffect(()=>{resetAllFilter();fetchProjects();},[]);useEffect(()=>{if(projects.pagination){setTotalRecords(projects.pagination.totalCount);}},[projects.pagination]);return/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 car-component\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card car-container\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t('offset.projectList')}),/*#__PURE__*/_jsxs(DataTable,{value:projects.data,lazy:true,paginator:projects.pagination?((_projects$pagination=projects.pagination)===null||_projects$pagination===void 0?void 0:_projects$pagination.totalPages)>1:false,first:first,className:\"p-datatable-customers\",totalRecords:totalRecords,rows:8,dataKey:\"id\",header:/*#__PURE__*/_jsx(TableHeader,{filterTransation:true}),loading:!loaded,responsiveLayout:\"stack\",emptyMessage:t('carContent.noProductsFoundMessage'),onPage:e=>{setFirst(e.first);if(e.page){paginationStore.setPagination(e.page+1);fetchProjects();}else{paginationStore.setPagination(1);fetchProjects();}},children:[/*#__PURE__*/_jsx(Column,{field:\"name\",header:t('header.name'),className:\"max-w-10rem\",style:{wordWrap:'break-word'}}),/*#__PURE__*/_jsx(Column,{field:\"country\",header:t('header.countries'),body:rowData=>rowData.country.name,className:\"max-w-10rem\",style:{wordWrap:'break-word'}}),/*#__PURE__*/_jsx(Column,{field:\"sustainableDevelopmentGoals\",header:t('header.sdgs'),body:sdgBodyTemplate,className:\"max-w-10rem\"}),/*#__PURE__*/_jsx(Column,{field:\"projectStandard\",header:t('header.projectStandards'),body:rowData=>rowData.projectStandard.name,className:\"max-w-10rem\"}),/*#__PURE__*/_jsx(Column,{field:\"creationDate\",header:t('header.creationDate'),body:rowData=>dayjs(rowData.createdAt).format('DD/MM/YYYY'),className:\"max-w-10rem\"}),/*#__PURE__*/_jsx(Column,{field:\"totalUnitCount\",header:t('header.totalUnitCount'),className:\"max-w-10rem\"}),/*#__PURE__*/_jsx(Column,{header:t('header.actions'),body:controlsTemplate})]})]})})});});","map":{"version":3,"names":["DataTable","useEffect","useState","Column","Image","Tooltip","dayjs","Button","useNavigate","observer","rootStore","useTranslation","TableHeader","jsx","_jsx","jsxs","_jsxs","ModeratorProjectList","_projects$pagination","resetAllFilter","filterStore","paginationStore","projects","loaded","fetchProjects","projectStore","t","navigate","first","setFirst","totalRecords","setTotalRecords","sdgBodyTemplate","rowData","className","children","sustainableDevelopmentGoals","map","elem","tooltipClass","concat","id","target","src","imageUri","alt","height","name","controlsTemplate","type","icon","label","onClick","pagination","totalCount","value","data","lazy","paginator","totalPages","rows","dataKey","header","filterTransation","loading","responsiveLayout","emptyMessage","onPage","e","page","setPagination","field","style","wordWrap","body","country","projectStandard","createdAt","format"],"sources":["/Users/st/Documents/carbon/front/src/screens/projects/moderator-project-list.tsx"],"sourcesContent":["import { DataTable } from 'primereact/datatable';\nimport { ResponseProjectProps } from '@custom-types/projects-types';\nimport { useEffect, useState } from 'react';\nimport { Column } from 'primereact/column';\nimport { Image } from 'primereact/image';\nimport { Tooltip } from 'primereact/tooltip';\nimport dayjs from 'dayjs';\nimport { Button } from 'primereact/button';\nimport { useNavigate } from 'react-router';\nimport { observer } from 'mobx-react';\nimport { rootStore } from '@store/root-store';\nimport { useTranslation } from 'react-i18next';\nimport { TableHeader } from '@components/table/table-header';\n\nexport const ModeratorProjectList = observer(() => {\n  const { resetAllFilter } = rootStore.filterStore;\n  const { paginationStore } = rootStore;\n  const { projects, loaded, fetchProjects } = rootStore.projectStore;\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [first, setFirst] = useState(0);\n  const [totalRecords, setTotalRecords] = useState<number>(0);\n\n  const sdgBodyTemplate = (rowData: ResponseProjectProps) => {\n    return (\n      <div className=\"flex car-sdg-container\">\n        {rowData.sustainableDevelopmentGoals.map((elem) => {\n          const tooltipClass = `sdg-${elem.id}`;\n          return (\n            <div key={elem.id}>\n              <Tooltip target={`.${tooltipClass}`} />\n              <Image\n                src={elem.imageUri}\n                alt=\"Logo\"\n                height=\"30px\"\n                className={`mr-2 ${tooltipClass}`}\n                data-pr-tooltip={elem.name}\n                data-pr-position=\"right\"\n                data-pr-at=\"right+5 top\"\n                data-pr-my=\"left center-2\"\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const controlsTemplate = (rowData: ResponseProjectProps) => {\n    return (\n      <div className=\"flex flex-column\">\n        <Button\n          type=\"button\"\n          icon=\"pi pi-eye\"\n          label={t('button.logs')}\n          className=\"p-button mx-auto\"\n          onClick={() => navigate(`/moderator/projects/${rowData.id}/logs`)}\n        />\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    resetAllFilter();\n    fetchProjects();\n  }, []);\n\n  useEffect(() => {\n    if (projects.pagination) {\n      setTotalRecords(projects.pagination.totalCount);\n    }\n  }, [projects.pagination]);\n\n  return (\n    <div className=\"grid\">\n      <div className=\"col-12 car-component\">\n        <div className=\"card car-container\">\n          <h5>{t('offset.projectList')}</h5>\n          <DataTable\n            value={projects.data}\n            lazy\n            paginator={projects.pagination ? projects.pagination?.totalPages > 1 : false}\n            first={first}\n            className=\"p-datatable-customers\"\n            totalRecords={totalRecords}\n            rows={8}\n            dataKey=\"id\"\n            header={<TableHeader filterTransation />}\n            loading={!loaded}\n            responsiveLayout=\"stack\"\n            emptyMessage={t('carContent.noProductsFoundMessage')}\n            onPage={(e) => {\n              setFirst(e.first);\n              if (e.page) {\n                paginationStore.setPagination((e.page + 1) as unknown as number);\n                fetchProjects();\n              } else {\n                paginationStore.setPagination(1);\n                fetchProjects();\n              }\n            }}\n          >\n            <Column\n              field=\"name\"\n              header={t('header.name')}\n              className=\"max-w-10rem\"\n              style={{ wordWrap: 'break-word' }}\n            />\n            <Column\n              field=\"country\"\n              header={t('header.countries')}\n              body={(rowData: ResponseProjectProps) => rowData.country.name}\n              className=\"max-w-10rem\"\n              style={{ wordWrap: 'break-word' }}\n            />\n            <Column\n              field=\"sustainableDevelopmentGoals\"\n              header={t('header.sdgs')}\n              body={sdgBodyTemplate}\n              className=\"max-w-10rem\"\n            />\n            <Column\n              field=\"projectStandard\"\n              header={t('header.projectStandards')}\n              body={(rowData: ResponseProjectProps) => rowData.projectStandard.name}\n              className=\"max-w-10rem\"\n            />\n            <Column\n              field=\"creationDate\"\n              header={t('header.creationDate')}\n              body={(rowData: ResponseProjectProps) =>\n                dayjs(rowData.createdAt).format('DD/MM/YYYY')\n              }\n              className=\"max-w-10rem\"\n            />\n            <Column\n              field=\"totalUnitCount\"\n              header={t('header.totalUnitCount')}\n              className=\"max-w-10rem\"\n            />\n            <Column header={t('header.actions')} body={controlsTemplate} />\n          </DataTable>\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}