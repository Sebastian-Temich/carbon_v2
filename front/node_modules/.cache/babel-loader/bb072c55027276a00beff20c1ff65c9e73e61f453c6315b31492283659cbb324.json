{"ast":null,"code":"import _objectSpread from\"/Users/st/Documents/carbon/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{cloneDeep}from'lodash';import{makeAutoObservable,runInAction}from'mobx';import{v4 as uuidv4}from'uuid';export class ModalStore{constructor(){this.modals=[];this.push=modal=>{const modalId=uuidv4();const newModal=_objectSpread(_objectSpread({},modal),{},{id:modalId,isOpen:true,width:modal.width||'300px',isLoading:modal.isLoading||false,agreeProps:modal.agreeProps||{},closeProps:modal.closeProps||{}});this.modals.push(newModal);return newModal;};this.update=_ref=>{let{id,isLoading,title,content,onAgree,onClose,agreeContent,closeContent,agreeProps,closeProps}=_ref;const modalIndex=this.modals.findIndex(modal=>modal.id===id);if(modalIndex===-1)return;const clonedModal=cloneDeep(this.modals[modalIndex]);clonedModal.isLoading=typeof isLoading==='boolean'?isLoading:clonedModal.isLoading;clonedModal.title=typeof title==='string'?title:clonedModal.title;clonedModal.content=content!==null&&content!==void 0?content:clonedModal.content;clonedModal.onAgree=typeof onAgree==='function'?onAgree:clonedModal.onAgree;clonedModal.onClose=typeof onClose==='function'?onClose:clonedModal.onClose;clonedModal.agreeContent=agreeContent!==null&&agreeContent!==void 0?agreeContent:clonedModal.agreeContent;clonedModal.closeContent=closeContent!==null&&closeContent!==void 0?closeContent:clonedModal.closeContent;clonedModal.agreeProps=agreeProps!==null&&agreeProps!==void 0?agreeProps:clonedModal.agreeProps;clonedModal.closeProps=closeProps!==null&&closeProps!==void 0?closeProps:clonedModal.closeProps;runInAction(()=>{this.modals[modalIndex]=clonedModal;});};this.close=async _ref2=>{let{id,callback}=_ref2;const modalIndex=this.modals.findIndex(modal=>modal.id===id);if(modalIndex===-1)return;const clonedModal=cloneDeep(this.modals[modalIndex]);if(typeof callback==='function')await callback(clonedModal);clonedModal.isOpen=false;runInAction(()=>{this.modals[modalIndex]=clonedModal;});setTimeout(()=>this.deleteModal(id),1000);};this.deleteModal=id=>{this.modals=this.modals.filter(modal=>modal.id!==id);};makeAutoObservable(this);}}export const modalStore=new ModalStore();","map":{"version":3,"names":["cloneDeep","makeAutoObservable","runInAction","v4","uuidv4","ModalStore","constructor","modals","push","modal","modalId","newModal","_objectSpread","id","isOpen","width","isLoading","agreeProps","closeProps","update","_ref","title","content","onAgree","onClose","agreeContent","closeContent","modalIndex","findIndex","clonedModal","close","_ref2","callback","setTimeout","deleteModal","filter","modalStore"],"sources":["/Users/st/Documents/carbon/front/src/store/modal-store.ts"],"sourcesContent":["import { cloneDeep } from 'lodash';\nimport { makeAutoObservable, runInAction } from 'mobx';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { CloseModalArgs, Modal, PushModalArgs, UpdateModalArgs } from '@custom-types/modal-types';\n\nexport class ModalStore {\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  modals: Modal[] = [];\n\n  push = (modal: PushModalArgs): Modal => {\n    const modalId = uuidv4();\n    const newModal = {\n      ...modal,\n      id: modalId,\n      isOpen: true,\n      width: modal.width || '300px',\n      isLoading: modal.isLoading || false,\n      agreeProps: modal.agreeProps || {},\n      closeProps: modal.closeProps || {},\n    };\n\n    this.modals.push(newModal);\n\n    return newModal;\n  };\n\n  update = ({\n    id,\n    isLoading,\n    title,\n    content,\n    onAgree,\n    onClose,\n    agreeContent,\n    closeContent,\n    agreeProps,\n    closeProps,\n  }: UpdateModalArgs) => {\n    const modalIndex = this.modals.findIndex((modal) => modal.id === id);\n\n    if (modalIndex === -1) return;\n\n    const clonedModal = cloneDeep(this.modals[modalIndex]);\n\n    clonedModal.isLoading = typeof isLoading === 'boolean' ? isLoading : clonedModal.isLoading;\n    clonedModal.title = typeof title === 'string' ? title : clonedModal.title;\n    clonedModal.content = content ?? clonedModal.content;\n    clonedModal.onAgree = typeof onAgree === 'function' ? onAgree : clonedModal.onAgree;\n    clonedModal.onClose = typeof onClose === 'function' ? onClose : clonedModal.onClose;\n    clonedModal.agreeContent = agreeContent ?? clonedModal.agreeContent;\n    clonedModal.closeContent = closeContent ?? clonedModal.closeContent;\n    clonedModal.agreeProps = agreeProps ?? clonedModal.agreeProps;\n    clonedModal.closeProps = closeProps ?? clonedModal.closeProps;\n\n    runInAction(() => {\n      this.modals[modalIndex] = clonedModal;\n    });\n  };\n\n  close = async ({ id, callback }: CloseModalArgs) => {\n    const modalIndex = this.modals.findIndex((modal) => modal.id === id);\n\n    if (modalIndex === -1) return;\n\n    const clonedModal = cloneDeep(this.modals[modalIndex]);\n\n    if (typeof callback === 'function') await callback(clonedModal);\n\n    clonedModal.isOpen = false;\n\n    runInAction(() => {\n      this.modals[modalIndex] = clonedModal;\n    });\n    setTimeout(() => this.deleteModal(id), 1000);\n  };\n\n  private deleteModal = (id: string) => {\n    this.modals = this.modals.filter((modal) => modal.id !== id);\n  };\n}\n\nexport const modalStore = new ModalStore();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}