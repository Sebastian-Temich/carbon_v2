{"ast":null,"code":"import{useTranslation}from'react-i18next';import{Calendar}from'@components/form/calendar';import{Dropdown}from'@components/form/dropdown';import{InplaceWrapper}from'@components/form/inplace-wrapper';import{Inplace,InplaceContent}from'primereact/inplace';import{Input}from'@components/form/input';import{InputTextarea}from'@components/form/input-textarea';import{offsetDetailsStore}from'@store/offset-store';import dayjs from'dayjs';import{useFormikContext}from'formik';import{observer}from'mobx-react';import{ScrollPanel}from'primereact/scrollpanel';import{ScrollTop}from'primereact/scrolltop';import{rootStore}from'@store/root-store';import ImgUpload from'../img-upload/img-upload';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const OffsetUpdate=observer(_ref=>{var _errors$shortDescript,_errors$auditUnit,_errors$unitType,_errors$unitCreationY,_errors$unitPrice,_errors$currencyId;let{edit,setEdit,setImageFile}=_ref;const{t}=useTranslation();const{values,errors,handleChange,handleBlur,touched}=useFormikContext();const{offsetDetails}=offsetDetailsStore;const{formData}=rootStore.dataFormStore;const formatDate=formatingDate=>dayjs(formatingDate).format('DD-MM-YYYY');const formatToYear=formatingDate=>dayjs(formatingDate).format('YYYY');return/*#__PURE__*/_jsxs(ScrollPanel,{style:{height:'420px'},className:\"offset-update\",children:[/*#__PURE__*/_jsx(Inplace,{active:edit,onToggle:e=>setEdit(e.value),disabled:!edit,children:/*#__PURE__*/_jsx(InplaceContent,{children:/*#__PURE__*/_jsx(ImgUpload,{setImageFile:setImageFile})})}),/*#__PURE__*/_jsx(InplaceWrapper,{title:t('offset.description'),edit:edit,setEdit:setEdit,message:offsetDetails===null||offsetDetails===void 0?void 0:offsetDetails.shortDescription,children:/*#__PURE__*/_jsx(InputTextarea,{mt:true,id:\"shortDescription\",values:values.shortDescription,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$shortDescript=errors.shortDescription)!==null&&_errors$shortDescript!==void 0?_errors$shortDescript:''),touched:touched.shortDescription})}),/*#__PURE__*/_jsx(InplaceWrapper,{title:t('offset.auditUnit'),edit:edit,setEdit:setEdit,message:offsetDetails===null||offsetDetails===void 0?void 0:offsetDetails.auditUnit.name,children:/*#__PURE__*/_jsx(Dropdown,{mt:true,id:\"auditUnit\",onBlur:handleBlur,options:formData.auditUnits,values:values.auditUnit,onChange:handleChange,errors:t((_errors$auditUnit=errors.auditUnit)!==null&&_errors$auditUnit!==void 0?_errors$auditUnit:''),touched:touched.auditUnit})}),/*#__PURE__*/_jsx(InplaceWrapper,{title:t('offset.unitType'),edit:edit,setEdit:setEdit,message:offsetDetails===null||offsetDetails===void 0?void 0:offsetDetails.unitType.name,children:/*#__PURE__*/_jsx(Dropdown,{mt:true,id:\"unitType\",options:formData.unitTypes,values:values.unitType,onBlur:handleBlur,onChange:handleChange,errors:t((_errors$unitType=errors.unitType)!==null&&_errors$unitType!==void 0?_errors$unitType:''),touched:touched.unitType})}),/*#__PURE__*/_jsx(InplaceWrapper,{title:t('offset.unitCreationYear'),edit:edit,setEdit:setEdit,message:formatToYear(offsetDetails===null||offsetDetails===void 0?void 0:offsetDetails.unitCreationYear),children:/*#__PURE__*/_jsx(Calendar,{mt:true,id:\"unitCreationYear\",values:values.unitCreationYear,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$unitCreationY=errors.unitCreationYear)!==null&&_errors$unitCreationY!==void 0?_errors$unitCreationY:''),touched:touched.unitCreationYear,view:\"year\",dateFormat:\"yy\"})}),/*#__PURE__*/_jsx(InplaceWrapper,{title:t('investorwallet.unitPrice'),edit:edit,setEdit:setEdit,message:offsetDetails===null||offsetDetails===void 0?void 0:offsetDetails.unitCount,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Input,{type:\"number\",values:values.unitPrice,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$unitPrice=errors.unitPrice)!==null&&_errors$unitPrice!==void 0?_errors$unitPrice:''),touched:touched.unitPrice,col:\"col-6\",mt:true,id:\"unitPrice\"}),/*#__PURE__*/_jsx(Dropdown,{options:formData.currencies,values:values.currencyId,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$currencyId=errors.currencyId)!==null&&_errors$currencyId!==void 0?_errors$currencyId:''),touched:touched.currencyId,mt:true,col:\"col-6\",id:\"currencyId\"})]})}),/*#__PURE__*/_jsx(ScrollTop,{target:\"parent\",className:\"custom-scrolltop\",threshold:100,icon:\"pi pi-arrow-up\"})]});});","map":{"version":3,"names":["useTranslation","Calendar","Dropdown","InplaceWrapper","Inplace","InplaceContent","Input","InputTextarea","offsetDetailsStore","dayjs","useFormikContext","observer","ScrollPanel","ScrollTop","rootStore","ImgUpload","jsx","_jsx","jsxs","_jsxs","OffsetUpdate","_ref","_errors$shortDescript","_errors$auditUnit","_errors$unitType","_errors$unitCreationY","_errors$unitPrice","_errors$currencyId","edit","setEdit","setImageFile","t","values","errors","handleChange","handleBlur","touched","offsetDetails","formData","dataFormStore","formatDate","formatingDate","format","formatToYear","style","height","className","children","active","onToggle","e","value","disabled","title","message","shortDescription","mt","id","onChange","onBlur","auditUnit","name","options","auditUnits","unitType","unitTypes","unitCreationYear","view","dateFormat","unitCount","type","unitPrice","col","currencies","currencyId","target","threshold","icon"],"sources":["/Users/st/Documents/carbon/front/src/screens/offset/offset-details/offset-update.tsx"],"sourcesContent":["import { FC } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Calendar } from '@components/form/calendar';\nimport { Dropdown } from '@components/form/dropdown';\nimport { InplaceWrapper } from '@components/form/inplace-wrapper';\nimport { Inplace, InplaceContent } from 'primereact/inplace';\nimport { Input } from '@components/form/input';\nimport { InputTextarea } from '@components/form/input-textarea';\nimport { OffsetFormikTypes } from '@custom-types/offset-types';\nimport { ImgFileTypes } from '@custom-types/img-types';\nimport { offsetDetailsStore } from '@store/offset-store';\nimport dayjs from 'dayjs';\nimport { useFormikContext } from 'formik';\nimport { observer } from 'mobx-react';\nimport { ScrollPanel } from 'primereact/scrollpanel';\nimport { ScrollTop } from 'primereact/scrolltop';\nimport { rootStore } from '@store/root-store';\nimport ImgUpload from '../img-upload/img-upload';\n\nexport const OffsetUpdate: FC<{\n  edit: boolean;\n  setEdit: (edit: boolean) => void;\n  setImageFile: (imageFile: ImgFileTypes | null) => void;\n}> = observer(({ edit, setEdit, setImageFile }) => {\n  const { t } = useTranslation();\n  const { values, errors, handleChange, handleBlur, touched } =\n    useFormikContext<OffsetFormikTypes>();\n  const { offsetDetails } = offsetDetailsStore;\n  const { formData } = rootStore.dataFormStore;\n  const formatDate = (formatingDate: string | undefined) =>\n    dayjs(formatingDate).format('DD-MM-YYYY');\n  const formatToYear = (formatingDate: string | undefined) => dayjs(formatingDate).format('YYYY');\n\n  return (\n    <ScrollPanel style={{ height: '420px' }} className=\"offset-update\">\n      <Inplace active={edit} onToggle={(e) => setEdit(e.value)} disabled={!edit}>\n        <InplaceContent>\n          <ImgUpload setImageFile={setImageFile} />\n        </InplaceContent>\n      </Inplace>\n      <InplaceWrapper\n        title={t('offset.description')}\n        edit={edit}\n        setEdit={setEdit}\n        message={offsetDetails?.shortDescription}\n      >\n        <InputTextarea\n          mt\n          id=\"shortDescription\"\n          values={values.shortDescription}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          errors={t(errors.shortDescription ?? '')}\n          touched={touched.shortDescription}\n        />\n      </InplaceWrapper>\n      <InplaceWrapper\n        title={t('offset.auditUnit')}\n        edit={edit}\n        setEdit={setEdit}\n        message={offsetDetails?.auditUnit.name}\n      >\n        <Dropdown\n          mt\n          id=\"auditUnit\"\n          onBlur={handleBlur}\n          options={formData.auditUnits}\n          values={values.auditUnit}\n          onChange={handleChange}\n          errors={t(errors.auditUnit ?? '')}\n          touched={touched.auditUnit}\n        />\n      </InplaceWrapper>\n      <InplaceWrapper\n        title={t('offset.unitType')}\n        edit={edit}\n        setEdit={setEdit}\n        message={offsetDetails?.unitType.name}\n      >\n        <Dropdown\n          mt\n          id=\"unitType\"\n          options={formData.unitTypes}\n          values={values.unitType}\n          onBlur={handleBlur}\n          onChange={handleChange}\n          errors={t(errors.unitType ?? '')}\n          touched={touched.unitType}\n        />\n      </InplaceWrapper>\n      <InplaceWrapper\n        title={t('offset.unitCreationYear')}\n        edit={edit}\n        setEdit={setEdit}\n        message={formatToYear(offsetDetails?.unitCreationYear)}\n      >\n        <Calendar\n          mt\n          id=\"unitCreationYear\"\n          values={values.unitCreationYear}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          errors={t(errors.unitCreationYear ?? '')}\n          touched={touched.unitCreationYear}\n          view=\"year\"\n          dateFormat=\"yy\"\n        />\n      </InplaceWrapper>\n      <InplaceWrapper\n        title={t('investorwallet.unitPrice')}\n        edit={edit}\n        setEdit={setEdit}\n        message={offsetDetails?.unitCount}\n      >\n        <div className=\"flex\">\n          <Input\n            type=\"number\"\n            values={values.unitPrice as number}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            errors={t(errors.unitPrice ?? '')}\n            touched={touched.unitPrice}\n            col=\"col-6\"\n            mt\n            id=\"unitPrice\"\n          />\n          <Dropdown\n            options={formData.currencies}\n            values={values.currencyId}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            errors={t(errors.currencyId ?? '')}\n            touched={touched.currencyId}\n            mt\n            col=\"col-6\"\n            id=\"currencyId\"\n          />\n        </div>\n      </InplaceWrapper>\n      <ScrollTop\n        target=\"parent\"\n        className=\"custom-scrolltop\"\n        threshold={100}\n        icon=\"pi pi-arrow-up\"\n      />\n    </ScrollPanel>\n  );\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}