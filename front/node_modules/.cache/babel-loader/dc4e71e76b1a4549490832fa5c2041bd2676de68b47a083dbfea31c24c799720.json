{"ast":null,"code":"import{cloneElement,isValidElement}from'react';import{observer}from'mobx-react';import{Button}from'primereact/button';import{Dialog}from'primereact/dialog';import{modalStore}from'@store/modal-store';import{DefaultModalContents,ModalTypes}from'@variables/modal-variables';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const ModalProvider=observer(_ref=>{let{children}=_ref;const{modals}=modalStore;const getDialogContent=modal=>{const{content}=modal;const isContentElement=/*#__PURE__*/isValidElement(content);const contentValue=isContentElement?(/*#__PURE__*/cloneElement(content,{closeModal:()=>modalStore.close({id:modal.id})})):/*#__PURE__*/_jsx(\"div\",{children:content});const dialogContent=modal.type===ModalTypes.CustomContent?contentValue:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-1 ml-2\",children:contentValue});return dialogContent;};const getDialogActions=modal=>{var _modal$agreeContent,_modal$closeContent;if(modal.type===ModalTypes.CustomContent)return null;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 button-wrapper-inline\",children:[modal.type===ModalTypes.Confirmation&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{className:\"p-button-text mr-2 mb-2\",onClick:()=>modalStore.close({id:modal.id,callback:modal.onAgree}),loading:modal.isLoading,children:(_modal$agreeContent=modal.agreeContent)!==null&&_modal$agreeContent!==void 0?_modal$agreeContent:DefaultModalContents.Agree})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{className:\"p-button-danger p-button-text mr-2 mb-2\",onClick:()=>modalStore.close({id:modal.id,callback:modal.onClose}),disabled:modal.isLoading,children:(_modal$closeContent=modal.closeContent)!==null&&_modal$closeContent!==void 0?_modal$closeContent:DefaultModalContents.Close})})]})});};const renderedModals=modals.map(modal=>{const dialogContent=getDialogContent(modal);const dialogActions=getDialogActions(modal);return/*#__PURE__*/_jsx(Dialog,{visible:modal.isOpen,style:{width:\"\".concat(modal.width)},onHide:()=>modalStore.close({id:modal.id,callback:modal.onClose}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid formgrid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-2 ml-2\",children:modal.title}),dialogContent,dialogActions]})},modal.id);});return/*#__PURE__*/_jsxs(_Fragment,{children:[children,renderedModals]});});","map":{"version":3,"names":["cloneElement","isValidElement","observer","Button","Dialog","modalStore","DefaultModalContents","ModalTypes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ModalProvider","_ref","children","modals","getDialogContent","modal","content","isContentElement","contentValue","closeModal","close","id","dialogContent","type","CustomContent","className","getDialogActions","_modal$agreeContent","_modal$closeContent","Confirmation","onClick","callback","onAgree","loading","isLoading","agreeContent","Agree","onClose","disabled","closeContent","Close","renderedModals","map","dialogActions","visible","isOpen","style","width","concat","onHide","title"],"sources":["/Users/st/Documents/carbon/front/src/components/modal-provider/modal-provider.tsx"],"sourcesContent":["import { cloneElement, isValidElement, PropsWithChildren, ReactElement } from 'react';\n\nimport { observer } from 'mobx-react';\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\n\nimport { Modal } from '@custom-types/modal-types';\nimport { modalStore } from '@store/modal-store';\nimport { DefaultModalContents, ModalTypes } from '@variables/modal-variables';\n\ninterface ModalProviderProps extends PropsWithChildren {}\n\nexport interface ModalContentElementProps {\n  closeModal?: () => void;\n}\n\nexport const ModalProvider = observer(({ children }: ModalProviderProps) => {\n  const { modals } = modalStore;\n\n  const getDialogContent = (modal: Modal) => {\n    const { content } = modal;\n    const isContentElement = isValidElement(content);\n\n    const contentValue = isContentElement ? (\n      cloneElement(content as ReactElement<ModalContentElementProps>, {\n        closeModal: () => modalStore.close({ id: modal.id }),\n      })\n    ) : (\n      <div>{content}</div>\n    );\n\n    const dialogContent =\n      modal.type === ModalTypes.CustomContent ? (\n        contentValue\n      ) : (\n        <div className=\"col-12 mb-1 ml-2\">{contentValue}</div>\n      );\n\n    return dialogContent;\n  };\n\n  const getDialogActions = (modal: Modal) => {\n    if (modal.type === ModalTypes.CustomContent) return null;\n\n    return (\n      <div>\n        <div className=\"col-12 button-wrapper-inline\">\n          {modal.type === ModalTypes.Confirmation && (\n            <div>\n              <Button\n                className=\"p-button-text mr-2 mb-2\"\n                onClick={() => modalStore.close({ id: modal.id, callback: modal.onAgree })}\n                loading={modal.isLoading}\n              >\n                {modal.agreeContent ?? DefaultModalContents.Agree}\n              </Button>\n            </div>\n          )}\n          <div>\n            <Button\n              className=\"p-button-danger p-button-text mr-2 mb-2\"\n              onClick={() => modalStore.close({ id: modal.id, callback: modal.onClose })}\n              disabled={modal.isLoading}\n            >\n              {modal.closeContent ?? DefaultModalContents.Close}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderedModals = modals.map((modal) => {\n    const dialogContent = getDialogContent(modal);\n    const dialogActions = getDialogActions(modal);\n\n    return (\n      <Dialog\n        visible={modal.isOpen}\n        key={modal.id}\n        style={{ width: `${modal.width}` }}\n        onHide={() => modalStore.close({ id: modal.id, callback: modal.onClose })}\n      >\n        <div className=\"grid formgrid\">\n          <div className=\"col-12 mb-2 ml-2\">{modal.title}</div>\n          {dialogContent}\n          {dialogActions}\n        </div>\n      </Dialog>\n    );\n  });\n\n  return (\n    <>\n      {children}\n      {renderedModals}\n    </>\n  );\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}