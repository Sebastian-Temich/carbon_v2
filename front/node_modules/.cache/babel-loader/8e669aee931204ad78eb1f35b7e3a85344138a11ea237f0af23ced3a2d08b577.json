{"ast":null,"code":"import{useFormik}from'formik';import{Button}from'primereact/button';import{useTranslation}from'react-i18next';import{Input}from'@components/form/input';import{modalStore}from'@store/modal-store';import{ModalTypes}from'@variables/modal-variables';import{observer}from'mobx-react';import{rootStore}from'@store/root-store';import{ValidationAddEditSchema}from'./validation-add-edit-user';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AddEditModerators=observer(_ref=>{var _moderator$moderator,_errors$firstName,_errors$lastName,_errors$email,_errors$phone;let{setRefresh,setOpenAdminDialog,onCloseDialog,moderator}=_ref;const{t}=useTranslation();const{updateModerator,addModerator,fetchModerators}=rootStore.moderatorsStore;const{errors,touched,resetForm,handleChange,handleSubmit,handleBlur,values,setErrors}=useFormik({initialValues:{firstName:moderator.firstName,lastName:moderator.lastName,email:moderator.email,phone:(_moderator$moderator=moderator.moderator)===null||_moderator$moderator===void 0?void 0:_moderator$moderator.phoneNumber},enableReinitialize:true,validationSchema:ValidationAddEditSchema,onSubmit:async()=>{var _moderator$moderator2;const{firstName,lastName,email,phone}=values;const payload={firstName:firstName===moderator.firstName?undefined:firstName,lastName:lastName===moderator.lastName?undefined:lastName,email:email===moderator.email?undefined:email,phone:phone===((_moderator$moderator2=moderator.moderator)===null||_moderator$moderator2===void 0?void 0:_moderator$moderator2.phoneNumber)?undefined:phone};if(moderator.id){const response=await updateModerator(moderator.id,payload);if(response.isSuccessful()){setOpenAdminDialog(false);setRefresh({});fetchModerators();modalStore.push({title:t('moderator.updatedTitle'),content:t('moderator.updatedContent',{firstName,lastName}),type:ModalTypes.Info});}else if(response.isValidationError()){setErrors(response.validationErrors);}}else{const response=await addModerator(payload);if(response.isSuccessful()){setOpenAdminDialog(false);modalStore.push({title:t('moderator.createdTitle'),content:t('moderator.createdContent',{firstName,lastName}),type:ModalTypes.Info});}else if(response.isValidationError()){setErrors(response.validationErrors);}}}});return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-fluid grid formgrid add-edit-user m-4\",children:[/*#__PURE__*/_jsx(Input,{id:\"firstName\",label:t('register.firstNameLabel'),values:values.firstName,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$firstName=errors.firstName)!==null&&_errors$firstName!==void 0?_errors$firstName:''),touched:touched.firstName}),/*#__PURE__*/_jsx(Input,{id:\"lastName\",label:t('register.lastNameLabel'),values:values.lastName,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$lastName=errors.lastName)!==null&&_errors$lastName!==void 0?_errors$lastName:''),touched:touched.lastName}),/*#__PURE__*/_jsx(Input,{id:\"email\",label:t('register.emailLabel'),values:values.email,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$email=errors.email)!==null&&_errors$email!==void 0?_errors$email:''),touched:touched.email}),/*#__PURE__*/_jsx(Input,{id:\"phone\",label:t('register.phoneNumberLabel'),values:values.phone,onChange:handleChange,onBlur:handleBlur,errors:t((_errors$phone=errors.phone)!==null&&_errors$phone!==void 0?_errors$phone:''),touched:touched.phone}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-wrapper-inline col-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",label:t('button.submit'),icon:\"pi pi-check\",className:\"mr-2 mb-2\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",label:t('button.dismiss'),onClick:()=>{resetForm();onCloseDialog();},icon:\"pi pi-check\",className:\"p-button-secondary\"})})]})]});});","map":{"version":3,"names":["useFormik","Button","useTranslation","Input","modalStore","ModalTypes","observer","rootStore","ValidationAddEditSchema","jsx","_jsx","jsxs","_jsxs","AddEditModerators","_ref","_moderator$moderator","_errors$firstName","_errors$lastName","_errors$email","_errors$phone","setRefresh","setOpenAdminDialog","onCloseDialog","moderator","t","updateModerator","addModerator","fetchModerators","moderatorsStore","errors","touched","resetForm","handleChange","handleSubmit","handleBlur","values","setErrors","initialValues","firstName","lastName","email","phone","phoneNumber","enableReinitialize","validationSchema","onSubmit","_moderator$moderator2","payload","undefined","id","response","isSuccessful","push","title","content","type","Info","isValidationError","validationErrors","className","children","label","onChange","onBlur","icon","onClick"],"sources":["/Users/st/Documents/carbon/front/src/screens/admin-panel/form/add-edit-moderators.tsx"],"sourcesContent":["import { FC } from 'react';\n\nimport { useFormik } from 'formik';\nimport { Button } from 'primereact/button';\nimport { useTranslation } from 'react-i18next';\n\nimport { Input } from '@components/form/input';\nimport { modalStore } from '@store/modal-store';\nimport { ModalTypes } from '@variables/modal-variables';\n\nimport { observer } from 'mobx-react';\nimport { PostModeratorProps } from '@custom-types/moderator-types';\nimport { rootStore } from '@store/root-store';\nimport { ValidationAddEditSchema } from './validation-add-edit-user';\n\nexport const AddEditModerators: FC<{\n  moderator: PostModeratorProps;\n  setOpenAdminDialog: (value: boolean) => void;\n  setRefresh: (data: {}) => void;\n  onCloseDialog: () => void;\n}> = observer(({ setRefresh, setOpenAdminDialog, onCloseDialog, moderator }) => {\n  const { t } = useTranslation();\n  const { updateModerator, addModerator, fetchModerators } = rootStore.moderatorsStore;\n  const { errors, touched, resetForm, handleChange, handleSubmit, handleBlur, values, setErrors } =\n    useFormik({\n      initialValues: {\n        firstName: moderator.firstName,\n        lastName: moderator.lastName,\n        email: moderator.email,\n        phone: moderator.moderator?.phoneNumber,\n      },\n      enableReinitialize: true,\n      validationSchema: ValidationAddEditSchema,\n      onSubmit: async () => {\n        const { firstName, lastName, email, phone } = values;\n        const payload = {\n          firstName: firstName === moderator.firstName ? undefined : firstName,\n          lastName: lastName === moderator.lastName ? undefined : lastName,\n          email: email === moderator.email ? undefined : email,\n          phone: phone === moderator.moderator?.phoneNumber ? undefined : phone,\n        };\n        if (moderator.id) {\n          const response = await updateModerator(moderator.id, payload);\n          if (response.isSuccessful()) {\n            setOpenAdminDialog(false);\n            setRefresh({});\n            fetchModerators();\n            modalStore.push({\n              title: t('moderator.updatedTitle'),\n              content: t('moderator.updatedContent', { firstName, lastName }),\n              type: ModalTypes.Info,\n            });\n          } else if (response.isValidationError()) {\n            setErrors(response.validationErrors!);\n          }\n        } else {\n          const response = await addModerator(payload);\n          if (response.isSuccessful()) {\n            setOpenAdminDialog(false);\n            modalStore.push({\n              title: t('moderator.createdTitle'),\n              content: t('moderator.createdContent', { firstName, lastName }),\n              type: ModalTypes.Info,\n            });\n          } else if (response.isValidationError()) {\n            setErrors(response.validationErrors!);\n          }\n        }\n      },\n    });\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-fluid grid formgrid add-edit-user m-4\">\n      <Input\n        id=\"firstName\"\n        label={t('register.firstNameLabel')}\n        values={values.firstName}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        errors={t(errors.firstName ?? '')}\n        touched={touched.firstName}\n      />\n      <Input\n        id=\"lastName\"\n        label={t('register.lastNameLabel')}\n        values={values.lastName}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        errors={t(errors.lastName ?? '')}\n        touched={touched.lastName}\n      />\n      <Input\n        id=\"email\"\n        label={t('register.emailLabel')}\n        values={values.email}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        errors={t(errors.email ?? '')}\n        touched={touched.email}\n      />\n      <Input\n        id=\"phone\"\n        label={t('register.phoneNumberLabel')}\n        values={values.phone}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        errors={t(errors.phone ?? '')}\n        touched={touched.phone}\n      />\n      <div className=\"button-wrapper-inline col-12\">\n        <div className=\"field\">\n          <Button\n            type=\"submit\"\n            label={t('button.submit')}\n            icon=\"pi pi-check\"\n            className=\"mr-2 mb-2\"\n          />\n        </div>\n        <div className=\"field\">\n          <Button\n            type=\"button\"\n            label={t('button.dismiss')}\n            onClick={() => {\n              resetForm();\n              onCloseDialog();\n            }}\n            icon=\"pi pi-check\"\n            className=\"p-button-secondary\"\n          />\n        </div>\n      </div>\n    </form>\n  );\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}