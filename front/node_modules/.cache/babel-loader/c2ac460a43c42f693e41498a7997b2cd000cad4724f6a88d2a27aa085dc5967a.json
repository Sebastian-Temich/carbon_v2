{"ast":null,"code":"import{useFormik}from'formik';import{observer}from'mobx-react';import{Button}from'primereact/button';import{InputText}from'primereact/inputtext';import*as Yup from'yup';import{useTranslation}from'react-i18next';import{forgotPassword}from'@api/forgot-password-api';import{FormErrors}from'@components/form-errors/form-errors';import{modalStore}from'@store/modal-store';import{ModalTypes}from'@variables/modal-variables';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ValidationForgetPasswordSchema=()=>{return Yup.object().shape({email:Yup.string().email('yup.auth.invalidEmail').required('yup.auth.emailRequired')});};const CreateResetPasswordForm=observer(_ref=>{let{closeModal=()=>{}}=_ref;const{t}=useTranslation();const{values,errors,touched,handleChange,handleSubmit,handleBlur}=useFormik({initialValues:{email:''},validationSchema:ValidationForgetPasswordSchema,onSubmit:async()=>{const payload={email:values.email};const response=await forgotPassword(payload);if(response){modalStore.push({title:t('modal.passwordChangeModalTitle'),content:t('modal.passwordChangeModalContent'),type:ModalTypes.Info});}closeModal();}});return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"col-12 mb-1 ml-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 input-wrapper\",children:[/*#__PURE__*/_jsx(InputText,{\"data-testid\":\"email\",id:\"email\",onChange:handleChange,onBlur:handleBlur,type:\"text\",className:touched.email&&errors.email?'p-invalid mr-2':undefined,value:values.email}),touched.email&&errors.email&&/*#__PURE__*/_jsx(FormErrors,{messages:[t(String(errors.email))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 button-wrapper-inline\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"p-button-text mb-2\",children:t('button.reset')}),/*#__PURE__*/_jsx(Button,{className:\"p-button-danger p-button-text mb-2\",onClick:closeModal,children:t('button.cancel')})]})]});});export const useForgetPasswordModal=()=>{const{t}=useTranslation();const onResetPassword=()=>{const mainTitle=t('resetPassword.mainTitle');modalStore.push({title:mainTitle,width:'300px',content:/*#__PURE__*/_jsx(CreateResetPasswordForm,{}),type:ModalTypes.CustomContent});};return{onResetPassword};};","map":{"version":3,"names":["useFormik","observer","Button","InputText","Yup","useTranslation","forgotPassword","FormErrors","modalStore","ModalTypes","jsx","_jsx","jsxs","_jsxs","ValidationForgetPasswordSchema","object","shape","email","string","required","CreateResetPasswordForm","_ref","closeModal","t","values","errors","touched","handleChange","handleSubmit","handleBlur","initialValues","validationSchema","onSubmit","payload","response","push","title","content","type","Info","className","children","id","onChange","onBlur","undefined","value","messages","String","onClick","useForgetPasswordModal","onResetPassword","mainTitle","width","CustomContent"],"sources":["/Users/st/Documents/carbon/front/src/hooks/forget-passoword-hook.tsx"],"sourcesContent":["import { useFormik } from 'formik';\nimport { observer } from 'mobx-react';\nimport { Button } from 'primereact/button';\nimport { InputText } from 'primereact/inputtext';\nimport * as Yup from 'yup';\nimport { useTranslation } from 'react-i18next';\n\nimport { forgotPassword } from '@api/forgot-password-api';\nimport { FormErrors } from '@components/form-errors/form-errors';\nimport { ModalContentElementProps } from '@components/modal-provider/modal-provider';\nimport { modalStore } from '@store/modal-store';\nimport { ModalTypes } from '@variables/modal-variables';\n\nexport const ValidationForgetPasswordSchema = () => {\n  return Yup.object().shape({\n    email: Yup.string().email('yup.auth.invalidEmail').required('yup.auth.emailRequired'),\n  });\n};\n\nconst CreateResetPasswordForm = observer(({ closeModal = () => {} }: ModalContentElementProps) => {\n  const { t } = useTranslation();\n  const { values, errors, touched, handleChange, handleSubmit, handleBlur } = useFormik({\n    initialValues: {\n      email: '',\n    },\n    validationSchema: ValidationForgetPasswordSchema,\n    onSubmit: async () => {\n      const payload = {\n        email: values.email,\n      };\n      const response = await forgotPassword(payload);\n      if (response) {\n        modalStore.push({\n          title: t('modal.passwordChangeModalTitle'),\n          content: t('modal.passwordChangeModalContent'),\n          type: ModalTypes.Info,\n        });\n      }\n\n      closeModal();\n    },\n  });\n  return (\n    <form onSubmit={handleSubmit} className=\"col-12 mb-1 ml-1\">\n      <div className=\"col-12 input-wrapper\">\n        <InputText\n          data-testid=\"email\"\n          id=\"email\"\n          onChange={handleChange}\n          onBlur={handleBlur}\n          type=\"text\"\n          className={touched.email && errors.email ? 'p-invalid mr-2' : undefined}\n          value={values.email}\n        />\n        {touched.email && errors.email && <FormErrors messages={[t(String(errors.email))]} />}\n      </div>\n      <div className=\"col-12 button-wrapper-inline\">\n        <Button type=\"submit\" className=\"p-button-text mb-2\">\n          {t('button.reset')}\n        </Button>\n        <Button className=\"p-button-danger p-button-text mb-2\" onClick={closeModal}>\n          {t('button.cancel')}\n        </Button>\n      </div>\n    </form>\n  );\n});\nexport const useForgetPasswordModal = () => {\n  const { t } = useTranslation();\n  const onResetPassword = () => {\n    const mainTitle = t('resetPassword.mainTitle');\n\n    modalStore.push({\n      title: mainTitle,\n      width: '300px',\n      content: <CreateResetPasswordForm />,\n      type: ModalTypes.CustomContent,\n    });\n  };\n\n  return { onResetPassword };\n};\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,QAAQ,CAClC,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,MAAM,KAAQ,mBAAmB,CAC1C,OAASC,SAAS,KAAQ,sBAAsB,CAChD,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,cAAc,KAAQ,eAAe,CAE9C,OAASC,cAAc,KAAQ,0BAA0B,CACzD,OAASC,UAAU,KAAQ,qCAAqC,CAEhE,OAASC,UAAU,KAAQ,oBAAoB,CAC/C,OAASC,UAAU,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,MAAO,MAAM,CAAAC,8BAA8B,CAAGA,CAAA,GAAM,CAClD,MAAO,CAAAV,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,CACxBC,KAAK,CAAEb,GAAG,CAACc,MAAM,CAAC,CAAC,CAACD,KAAK,CAAC,uBAAuB,CAAC,CAACE,QAAQ,CAAC,wBAAwB,CACtF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,uBAAuB,CAAGnB,QAAQ,CAACoB,IAAA,EAAyD,IAAxD,CAAEC,UAAU,CAAGA,CAAA,GAAM,CAAC,CAA4B,CAAC,CAAAD,IAAA,CAC3F,KAAM,CAAEE,CAAE,CAAC,CAAGlB,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAEmB,MAAM,CAAEC,MAAM,CAAEC,OAAO,CAAEC,YAAY,CAAEC,YAAY,CAAEC,UAAW,CAAC,CAAG7B,SAAS,CAAC,CACpF8B,aAAa,CAAE,CACbb,KAAK,CAAE,EACT,CAAC,CACDc,gBAAgB,CAAEjB,8BAA8B,CAChDkB,QAAQ,CAAE,KAAAA,CAAA,GAAY,CACpB,KAAM,CAAAC,OAAO,CAAG,CACdhB,KAAK,CAAEO,MAAM,CAACP,KAChB,CAAC,CACD,KAAM,CAAAiB,QAAQ,CAAG,KAAM,CAAA5B,cAAc,CAAC2B,OAAO,CAAC,CAC9C,GAAIC,QAAQ,CAAE,CACZ1B,UAAU,CAAC2B,IAAI,CAAC,CACdC,KAAK,CAAEb,CAAC,CAAC,gCAAgC,CAAC,CAC1Cc,OAAO,CAAEd,CAAC,CAAC,kCAAkC,CAAC,CAC9Ce,IAAI,CAAE7B,UAAU,CAAC8B,IACnB,CAAC,CAAC,CACJ,CAEAjB,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAAC,CACF,mBACET,KAAA,SAAMmB,QAAQ,CAAEJ,YAAa,CAACY,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eACxD5B,KAAA,QAAK2B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC9B,IAAA,CAACR,SAAS,EACR,cAAY,OAAO,CACnBuC,EAAE,CAAC,OAAO,CACVC,QAAQ,CAAEhB,YAAa,CACvBiB,MAAM,CAAEf,UAAW,CACnBS,IAAI,CAAC,MAAM,CACXE,SAAS,CAAEd,OAAO,CAACT,KAAK,EAAIQ,MAAM,CAACR,KAAK,CAAG,gBAAgB,CAAG4B,SAAU,CACxEC,KAAK,CAAEtB,MAAM,CAACP,KAAM,CACrB,CAAC,CACDS,OAAO,CAACT,KAAK,EAAIQ,MAAM,CAACR,KAAK,eAAIN,IAAA,CAACJ,UAAU,EAACwC,QAAQ,CAAE,CAACxB,CAAC,CAACyB,MAAM,CAACvB,MAAM,CAACR,KAAK,CAAC,CAAC,CAAE,CAAE,CAAC,EAClF,CAAC,cACNJ,KAAA,QAAK2B,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C9B,IAAA,CAACT,MAAM,EAACoC,IAAI,CAAC,QAAQ,CAACE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CACjDlB,CAAC,CAAC,cAAc,CAAC,CACZ,CAAC,cACTZ,IAAA,CAACT,MAAM,EAACsC,SAAS,CAAC,oCAAoC,CAACS,OAAO,CAAE3B,UAAW,CAAAmB,QAAA,CACxElB,CAAC,CAAC,eAAe,CAAC,CACb,CAAC,EACN,CAAC,EACF,CAAC,CAEX,CAAC,CAAC,CACF,MAAO,MAAM,CAAA2B,sBAAsB,CAAGA,CAAA,GAAM,CAC1C,KAAM,CAAE3B,CAAE,CAAC,CAAGlB,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAA8C,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,SAAS,CAAG7B,CAAC,CAAC,yBAAyB,CAAC,CAE9Cf,UAAU,CAAC2B,IAAI,CAAC,CACdC,KAAK,CAAEgB,SAAS,CAChBC,KAAK,CAAE,OAAO,CACdhB,OAAO,cAAE1B,IAAA,CAACS,uBAAuB,GAAE,CAAC,CACpCkB,IAAI,CAAE7B,UAAU,CAAC6C,aACnB,CAAC,CAAC,CACJ,CAAC,CAED,MAAO,CAAEH,eAAgB,CAAC,CAC5B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}