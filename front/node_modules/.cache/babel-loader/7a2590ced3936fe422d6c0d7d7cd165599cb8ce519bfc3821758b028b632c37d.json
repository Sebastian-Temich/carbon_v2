{"ast":null,"code":"import{countFilterExceptions}from'@variables/filter-exceptions';import dayjs from'dayjs';import{makeAutoObservable,reaction,toJS}from'mobx';export default class FilterStore{constructor(rootStore){this.rootStore=void 0;this.filter={};this.date={};this.filterCount=0;this._loaded=false;this.setFilter=(value,transform,property,secProperty)=>{const checkValue=value===null||value===''||value===0?undefined:value;this.rootStore.paginationStore.pagination.page=1;switch(transform){case'simpleData':this.filter[property]=checkValue?dayjs(value).format('YYYY-MM-DD'):undefined;this.date[property]=checkValue;break;case'data':secProperty&&(this.filter[property]=checkValue?dayjs(value[0]).format():undefined,this.filter[secProperty]=checkValue?dayjs(value[1]).format():undefined,this.date[property]=value);break;case'count':this.filter[property]=checkValue;break;case'default':this.filter[property]=checkValue;break;case'checkbox':this.filter[property]=checkValue;break;default:return null;}return this.filter;};this.setFetchPayload=props=>{this.filter.ownedByCompanyId=props.ownedByCompanyId;this.filter.isOwnerOriginal=props.isOwnerOriginal;};this.resetFilter=()=>{this.filter.projectStandardId=undefined;this.filter.auditUnitId=undefined;this.filter.unitTypeId=undefined;this.filter.projectLocationCountryId=undefined;this.filter.projectSustainableDevelopmentGoalIds=undefined;this.filter.currencyIds=undefined;this.filter.unitCreationYear=undefined;this.filter.projectStartDate=undefined;this.filter.projectExpectedEndDate=undefined;this.filter.projectUnitGenerationStartDate=undefined;this.filter.projectUnitGenerationEndDate=undefined;this.filter.projectCircularity=undefined;this.filter.unitCountMin=undefined;this.filter.unitCountMax=undefined;this.filter.unitPriceMax=undefined;this.filter.unitPriceMin=undefined;this.filter.name=undefined;this.filter.countryIds=undefined;this.filter.sdgIds=undefined;this.filter.projectStandardIds=undefined;this.filter.totalUnitCountFrom=undefined;this.filter.totalUnitCountTo=undefined;this.filter.creationDateFrom=undefined;this.filter.creationDateTo=undefined;};this.resetAllFilter=()=>{this.filter={page:1,perPage:8};};this.rootStore=rootStore;makeAutoObservable(this);reaction(()=>toJS(this.filter),()=>this.countProperties());}countProperties(){this.filterCount=0;const keys=Object.keys(this.filter).filter(key=>this.filter[key]!==undefined&&!countFilterExceptions.includes(key));this.filterCount=keys.length;return this.filterCount;}set loaded(loaded){this._loaded=loaded;}get loaded(){return this._loaded;}}","map":{"version":3,"names":["countFilterExceptions","dayjs","makeAutoObservable","reaction","toJS","FilterStore","constructor","rootStore","filter","date","filterCount","_loaded","setFilter","value","transform","property","secProperty","checkValue","undefined","paginationStore","pagination","page","format","setFetchPayload","props","ownedByCompanyId","isOwnerOriginal","resetFilter","projectStandardId","auditUnitId","unitTypeId","projectLocationCountryId","projectSustainableDevelopmentGoalIds","currencyIds","unitCreationYear","projectStartDate","projectExpectedEndDate","projectUnitGenerationStartDate","projectUnitGenerationEndDate","projectCircularity","unitCountMin","unitCountMax","unitPriceMax","unitPriceMin","name","countryIds","sdgIds","projectStandardIds","totalUnitCountFrom","totalUnitCountTo","creationDateFrom","creationDateTo","resetAllFilter","perPage","countProperties","keys","Object","key","includes","length","loaded"],"sources":["/Users/st/Documents/carbon/front/src/store/filter-store.ts"],"sourcesContent":["import { GetFilterArgs } from '@custom-types/filter-types';\nimport { countFilterExceptions } from '@variables/filter-exceptions';\nimport dayjs from 'dayjs';\nimport _ from 'lodash';\nimport { makeAutoObservable, reaction, toJS } from 'mobx';\n\nimport { RootStore } from './root-store';\n\ninterface FilterType extends GetFilterArgs {\n  [key: string]: string | string[] | boolean | number | undefined | null;\n}\n\ninterface DataTransform {\n  simpleData: string;\n  data: string;\n  count: string;\n  default: string;\n  checkbox: string;\n}\n\ninterface Props {\n  ownedByCompanyId?: string;\n  statusIds?: string[];\n  isOwnerOriginal?: boolean;\n}\n\nexport default class FilterStore {\n  rootStore: RootStore;\n\n  filter: FilterType = {};\n\n  date: FilterType = {};\n\n  filterCount: number = 0;\n\n  private _loaded = false;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n    makeAutoObservable(this);\n    reaction(\n      () => toJS(this.filter),\n      () => this.countProperties(),\n    );\n  }\n\n  setFilter = (\n    value: string,\n    transform: keyof DataTransform,\n    property: keyof FilterType,\n    secProperty?: keyof FilterType,\n  ) => {\n    const checkValue =\n      value === null || value === '' || (value as unknown as number) === 0 ? undefined : value;\n    this.rootStore.paginationStore.pagination.page = 1;\n    switch (transform) {\n      case 'simpleData':\n        this.filter[property] = checkValue ? dayjs(value).format('YYYY-MM-DD') : undefined;\n        this.date[property] = checkValue;\n        break;\n      case 'data':\n        secProperty &&\n          ((this.filter[property] = checkValue ? dayjs(value[0]).format() : undefined),\n          (this.filter[secProperty] = checkValue ? dayjs(value[1]).format() : undefined),\n          (this.date[property] = value));\n        break;\n      case 'count':\n        this.filter[property] = checkValue as unknown as number;\n        break;\n      case 'default':\n        this.filter[property] = checkValue;\n        break;\n      case 'checkbox':\n        this.filter[property] = checkValue;\n        break;\n      default:\n        return null;\n    }\n    return this.filter;\n  };\n\n  setFetchPayload = (props: Props) => {\n    this.filter.ownedByCompanyId = props.ownedByCompanyId;\n    this.filter.isOwnerOriginal = props.isOwnerOriginal;\n  };\n\n  resetFilter = () => {\n    this.filter.projectStandardId = undefined;\n    this.filter.auditUnitId = undefined;\n    this.filter.unitTypeId = undefined;\n    this.filter.projectLocationCountryId = undefined;\n    this.filter.projectSustainableDevelopmentGoalIds = undefined;\n    this.filter.currencyIds = undefined;\n    this.filter.unitCreationYear = undefined;\n    this.filter.projectStartDate = undefined;\n    this.filter.projectExpectedEndDate = undefined;\n    this.filter.projectUnitGenerationStartDate = undefined;\n    this.filter.projectUnitGenerationEndDate = undefined;\n    this.filter.projectCircularity = undefined;\n    this.filter.unitCountMin = undefined;\n    this.filter.unitCountMax = undefined;\n    this.filter.unitPriceMax = undefined;\n    this.filter.unitPriceMin = undefined;\n    this.filter.name = undefined;\n    this.filter.countryIds = undefined;\n    this.filter.sdgIds = undefined;\n    this.filter.projectStandardIds = undefined;\n    this.filter.totalUnitCountFrom = undefined;\n    this.filter.totalUnitCountTo = undefined;\n    this.filter.creationDateFrom = undefined;\n    this.filter.creationDateTo = undefined;\n  };\n\n  countProperties() {\n    this.filterCount = 0;\n    const keys = Object.keys(this.filter).filter(\n      (key) => this.filter[key] !== undefined && !countFilterExceptions.includes(key),\n    );\n    this.filterCount = keys.length;\n    return this.filterCount;\n  }\n\n  resetAllFilter = () => {\n    this.filter = { page: 1, perPage: 8 };\n  };\n\n  set loaded(loaded: boolean) {\n    this._loaded = loaded;\n  }\n\n  get loaded() {\n    return this._loaded;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}