{"ast":null,"code":"import _objectSpread from\"/Users/st/Documents/carbon/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Button}from'primereact/button';import{observer}from'mobx-react';import{useTranslation}from'react-i18next';import{useFormik}from'formik';import{modalStore}from'@store/modal-store';import{ModalTypes}from'@variables/modal-variables';import{InputNumber}from'@components/form/input-number';import{RetireOffsetUnits}from'@api/offsets-api';import{rootStore}from'@store/root-store';import{ValidationRetireOffsetSchema}from'./validation/validation-retire-offset-schema';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RetireUnit=_ref=>{var _String;let{onCloseDialog,rawData,setOpenRetireDialog}=_ref;const{t}=useTranslation();const{values,errors,touched,handleChange,handleSubmit,handleBlur,setErrors}=useFormik({initialValues:{unitCount:rawData.unitCount},validationSchema:ValidationRetireOffsetSchema,onSubmit:async()=>{if(typeof values!=='undefined'){const unitCount=Number(values.unitCount);const payloadRetireUnit={unitCount};modalStore.push({title:'',content:t('offset.retireUnitContent',{count:Number(values===null||values===void 0?void 0:values.unitCount)}),type:ModalTypes.Confirmation,onAgree:async currentModal=>{modalStore.update(_objectSpread(_objectSpread({},currentModal),{},{isLoading:true}));const response=await RetireOffsetUnits(payloadRetireUnit,rootStore.marketplaceStore.retireOffset.id);if(response.isSuccessful()){setOpenRetireDialog(false);modalStore.push({title:t('offset.retireModalTitle'),content:t('offset.retireModalContent'),type:ModalTypes.Info});rootStore.marketplaceStore.fetchMarketplace();}else if(response.isValidationError()){setErrors(response.validationErrors);}}});}}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card border-none p-1\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"text-center\",children:t('offset.retireUnit')})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-fluid grid formgrid form\",children:[/*#__PURE__*/_jsx(InputNumber,{id:\"unitCount\",label:t('investorwallet.unitCount'),values:values===null||values===void 0?void 0:values.unitCount,min:1,max:rawData.unitCount,onChange:handleChange,onBlur:handleBlur,errors:t((_String=String(errors.unitCount))!==null&&_String!==void 0?_String:'')==='undefined'?'':t(String(errors.unitCount)),touched:touched.unitCount}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid p-fluid ml-2 mr-2 pb-3 button-offset-inline\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field mr-2 \",children:/*#__PURE__*/_jsx(Button,{className:\"p-button-warning\",type:\"submit\",label:t('button.retireButtonLabel')})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",label:t('button.cancel'),onClick:()=>{onCloseDialog();},className:\"p-button-secondary\"})})]})]})]});};export default observer(RetireUnit);","map":{"version":3,"names":["Button","observer","useTranslation","useFormik","modalStore","ModalTypes","InputNumber","RetireOffsetUnits","rootStore","ValidationRetireOffsetSchema","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RetireUnit","_ref","_String","onCloseDialog","rawData","setOpenRetireDialog","t","values","errors","touched","handleChange","handleSubmit","handleBlur","setErrors","initialValues","unitCount","validationSchema","onSubmit","Number","payloadRetireUnit","push","title","content","count","type","Confirmation","onAgree","currentModal","update","_objectSpread","isLoading","response","marketplaceStore","retireOffset","id","isSuccessful","Info","fetchMarketplace","isValidationError","validationErrors","children","className","label","min","max","onChange","onBlur","String","onClick"],"sources":["/Users/st/Documents/carbon/front/src/screens/investor-wallet/retireUnits/retire-unit.tsx"],"sourcesContent":["import { Button } from 'primereact/button';\n\nimport { observer } from 'mobx-react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useFormik } from 'formik';\nimport { modalStore } from '@store/modal-store';\n\nimport { ModalTypes } from '@variables/modal-variables';\n\nimport { FC } from 'react';\nimport { InputNumber } from '@components/form/input-number';\nimport { RetireOffsetUnits } from '@api/offsets-api';\nimport { rootStore } from '@store/root-store';\nimport { ValidationRetireOffsetSchema } from './validation/validation-retire-offset-schema';\n\nconst RetireUnit: FC<{\n  onCloseDialog: () => void;\n  setOpenRetireDialog: (value: boolean) => void;\n  rawData: { unitCount: Number };\n}> = ({ onCloseDialog, rawData, setOpenRetireDialog }) => {\n  const { t } = useTranslation();\n  const { values, errors, touched, handleChange, handleSubmit, handleBlur, setErrors } = useFormik({\n    initialValues: {\n      unitCount: rawData.unitCount,\n    },\n    validationSchema: ValidationRetireOffsetSchema,\n    onSubmit: async () => {\n      if (typeof values !== 'undefined') {\n        const unitCount = Number(values.unitCount);\n        const payloadRetireUnit = {\n          unitCount,\n        };\n        modalStore.push({\n          title: '',\n          content: t('offset.retireUnitContent', {\n            count: Number(values?.unitCount),\n          }) as unknown as string,\n          type: ModalTypes.Confirmation,\n          onAgree: async (currentModal) => {\n            modalStore.update({ ...currentModal, isLoading: true });\n            const response = await RetireOffsetUnits(\n              payloadRetireUnit,\n              rootStore.marketplaceStore.retireOffset.id,\n            );\n            if (response.isSuccessful()) {\n              setOpenRetireDialog(false);\n              modalStore.push({\n                title: t('offset.retireModalTitle'),\n                content: t('offset.retireModalContent'),\n                type: ModalTypes.Info,\n              });\n              rootStore.marketplaceStore.fetchMarketplace();\n            } else if (response.isValidationError()) {\n              setErrors(response.validationErrors!);\n            }\n          },\n        });\n      }\n    },\n  });\n\n  return (\n    <>\n      <div className=\"card border-none p-1\">\n        <h5 className=\"text-center\">{t('offset.retireUnit')}</h5>\n      </div>\n      <form onSubmit={handleSubmit} className=\"p-fluid grid formgrid form\">\n        <InputNumber\n          id=\"unitCount\"\n          label={t('investorwallet.unitCount')}\n          values={values?.unitCount}\n          min={1}\n          max={rawData.unitCount}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          errors={\n            t(String(errors.unitCount) ?? '') === 'undefined' ? '' : t(String(errors.unitCount))\n          }\n          touched={touched.unitCount}\n        />\n\n        <div className=\"grid p-fluid ml-2 mr-2 pb-3 button-offset-inline\">\n          <div className=\"field mr-2 \">\n            <Button\n              className=\"p-button-warning\"\n              type=\"submit\"\n              label={t('button.retireButtonLabel')}\n            />\n          </div>\n          <div className=\"field\">\n            <Button\n              type=\"button\"\n              label={t('button.cancel')}\n              onClick={() => {\n                onCloseDialog();\n              }}\n              className=\"p-button-secondary\"\n            />\n          </div>\n        </div>\n      </form>\n    </>\n  );\n};\nexport default observer(RetireUnit);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}